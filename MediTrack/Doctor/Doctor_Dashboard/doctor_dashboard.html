<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediTrack - Doctor Dashboard</title> -->

  <!-- Icons / Charts -->
  <!-- <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->

  <!-- Firebase (compat) - required for full feature set. Keep these BEFORE the doctor_dashboard.js script. -->
  <!-- <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script> -->

  <!-- Optional: html5-qrcode for camera-based QR scanning (used if you want live QR scan). -->
  <!-- <script src="https://unpkg.com/html5-qrcode@2.3.7/minified/html5-qrcode.min.js"></script> -->

  <!-- Your CSS -->
  <!-- <link rel="stylesheet" href="doctor_dashboard.css" />
  <style>
    /* tiny inline helper to make sure modals inserted by JS look correct if CSS not loaded yet */
    .hidden { display:none; }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <!- Sidebar -->
    <!-- <aside class="sidebar">
      <div class="logo">âš•ï¸ MediTrack</div>
      <nav>
        <ul>
          <li class="active">ğŸ  Dashboard</li>
          <li>ğŸ’¬ Chat</li>
          <li>ğŸ“… Schedule</li>
          <li>ğŸ“Š Reports</li>
          <hr>
          <li>ğŸ“‚ Documents</li>
          <li>ğŸ‘¥ Patients</li>
          <li>ğŸ’³ Billing</li>
        </ul>
        <div class="sidebar-indicator"></div>
      </nav>
    </aside> -->

    <!-- Main content -->
    <!-- <div class="main-content"> -->
      <!-- Topbar -->
      <!-- <div class="topbar">
        <div class="search">
          <input type="text" placeholder="Search..." id="topSearch" />
        </div> -->

        <!-- <div class="actions" style="display:flex;align-items:center;gap:12px"> -->
          <!-- notifications -->
          <!-- <div class="dropdown" style="position:relative">
            <i class="ri-notification-3-line" title="Notifications" style="font-size:20px;cursor:pointer"></i>
            <div class="dropdown-menu" aria-live="polite" style="min-width:320px;right:0;top:36px;padding:8px;">
              <p class="muted">No new notifications</p>
            </div>
          </div> -->

          <!-- topbar tools will be injected before #userMenu by JS -->
          <!-- user icons container (anchor for inserted tools) -->
          <!-- <span id="userMenu" style="display:flex;align-items:center;gap:10px">
            <i class="ri-moon-line" id="darkToggle" title="Toggle theme" style="font-size:20px;cursor:pointer"></i>
            <i class="ri-user-line" title="Profile" style="font-size:20px;cursor:pointer"></i>
          </span>
        </div>
      </div> -->

      <!-- Welcome Section -->
      <!-- <section class="welcome" id="view-dashboard">
        <div class="welcome-text">
          <h2>Good day, Dr. Johanna ğŸ‘©â€âš•ï¸</h2>
          <p>Hereâ€™s your summary for today</p>
        </div>
        <div class="welcome-gif"> -->
          <!-- use your local animation here; fallback to a gif -->
          <!-- <video autoplay loop muted playsinline style="width:120px;height:90px;object-fit:cover;border-radius:8px;">
            <source src="../assets/animations/Doc and Patient.webm" type="video/webm" />
          </video>
        </div>
      </section> -->

      <!-- Stats Section -->
      <!-- <section class="stats" aria-live="polite">
        <div class="card green">
          <h3 id="stat-online">210</h3>
          <p>ğŸŸ¢ Online Patients</p>
        </div>
        <div class="card red">
          <h3 id="stat-offline">32</h3>
          <p>ğŸ”´ Offline Patients</p>
        </div>
        <div class="card blue">
          <h3 id="stat-today-appt">18</h3>
          <p>ğŸ“… Appointments Today</p>
        </div>
        <div class="card purple">
          <h3 id="stat-prescribed">45</h3>
          <p>ğŸ’Š Medicines Prescribed</p>
        </div>
      </section> -->

      <!-- Widgets -->
      <!-- <div class="widgets">
        <div class="card upcoming-appointments">
          <h3>Upcoming Appointments</h3>
          <table>
            <thead>
              <tr><th>Patient</th><th>Date</th><th>Time</th><th></th></tr>
            </thead>
            <tbody id="upcomingApptBody"> -->
              <!-- JS will populate rows here -->
              <!-- <tr><td>John Doe</td><td>2025-09-07</td><td>10:00 AM</td><td><button class="btn small">Open</button></td></tr>
              <tr><td>Jane Smith</td><td>2025-09-07</td><td>11:30 AM</td><td><button class="btn small">Open</button></td></tr>
            </tbody>
          </table>
        </div> -->

        <!-- <div class="card quick-actions">
          <h3>Quick Actions</h3>
          <button id="btnAddPatient" class="btn">+ Add Patient</button>
          <button id="btnNewAppt" class="btn ghost">+ New Appointment</button>
        </div>

        <div class="card activity">
          <h3>Recent Activity</h3>
          <ul id="activityList" style="margin-top:8px">
            <li>Dr. Kumar updated prescription for John Doe</li>
            <li>New appointment scheduled with Jane Smith</li>
            <li>Lab results uploaded for Patient #123</li>
          </ul>
        </div>
      </div> -->

      <!-- Doctors Section -->
      <!-- <section class="doctors">
        <h3 class="section-title">ğŸ‘¨â€âš•ï¸ Doctors on Duty</h3>
        <div class="doctor-grid" id="doctorsGrid">
          <div class="doctor-card">
            <img src="doctor1.jpg" alt="Doctor" />
            <h4>Dr. Alice Green</h4>
            <p>Cardiologist</p>
          </div>
          <div class="doctor-card">
            <img src="doctor2.jpg" alt="Doctor" />
            <h4>Dr. Mark Stone</h4>
            <p>Dermatologist</p>
          </div>
          <div class="doctor-card">
            <img src="doctor3.jpg" alt="Doctor" />
            <h4>Dr. Emily Ross</h4>
            <p>Neurologist</p>
          </div>
        </div>
      </section> -->

      <!-- Patients list (populated by JS) -->
      <!-- <section class="patients" style="margin-top:18px">
        <h3 class="section-title">ğŸ‘¥ Patients</h3>
        <div id="patientsList"> -->
          <!-- JS will populate patient cards here -->
        <!-- </div>
      </section> -->

      <!-- Reports Section -->
      <!-- <section class="reports" style="margin-top:18px">
        <h3 class="section-title">ğŸ“Š Reports & Analytics</h3>
        <div class="report-grid">
          <div class="report-card">
            <canvas id="patientsChart"></canvas>
          </div>
          <div class="report-card">
            <canvas id="appointmentsChart"></canvas>
          </div>
        </div>
      </section> -->

      <!-- Hidden placeholders for optional views (used by JS to mount content) -->
      <!-- <div id="view-prescription" class="hidden"></div>
      <div id="view-chat" class="hidden"></div>
      <div id="view-schedule" class="hidden"></div>
    </div>
  </div> -->

  <!-- Small footer (non intrusive) -->
  <!-- <footer style="position:fixed;left:260px;bottom:8px;font-size:12px;color:rgba(0,0,0,0.45)">
    MediTrack â€¢ Doctor Panel
  </footer> -->

  <!-- Replace doctor_dashboard.js with the JS file below -->
  <!-- <script src="doctor_dashboard.js" defer></script>
</body>
</html> --> 




















<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MediTrack â€” Doctor Dashboard</title>

  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.com/npm/chart.js"></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.7/minified/html5-qrcode.min.js"></script>

  <link rel="stylesheet" href="doctor_dashboard.css" />
  <style>
    /* Inline CSS for initial dark mode fix/modal opacity */
    .hidden { display:none; }
    .modal { opacity: 0; }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="logo">âš•ï¸</div>
        <div class="brand-text">
          <h2>MediTrack</h2>
          <small class="muted">Doctor Panel</small>
        </div>
      </div>

      <nav aria-label="Main navigation">
        <ul id="menuList">
          <li class="nav-item active" data-view="dashboard">ğŸ  Dashboard</li>
          <li class="nav-item" data-view="appointments">ğŸ“… Appointments</li>
          <li class="nav-item" data-view="patients">ğŸ‘¥ Patients</li>
          <li class="nav-item" data-view="prescriptions">ğŸ§¾ Prescriptions</li>
          <li class="nav-item" data-view="reports">ğŸ“Š Reports</li>
          <li class="nav-item" data-view="chat">ğŸ’¬ Chat</li>
          <hr>
          <li class="nav-item" data-view="documents">ğŸ“‚ Documents</li>
          <li class="nav-item" data-view="settings">âš™ï¸ Settings</li>
          <li class="nav-item" id="logout-btn">ğŸšª Sign Out</li>
        </ul>
        <div class="sidebar-indicator" id="sidebarIndicator"></div>
      </nav>

      <div class="sidebar-footer">
        <small class="muted">Signed in as</small>
        <div class="user" id="signedInUser">Dr. Johanna</div>
      </div>
    </aside>

    <main class="main-content" id="main">
      <header class="topbar">
        <div class="title-wrap">
          <h1 id="pageTitle">Dashboard</h1>
          <p class="subtitle muted" id="pageSubtitle">Your clinical summary</p>
        </div>

        <div class="controls">
          <div class="search-wrap">
            <input id="topSearch" type="search" placeholder="Search patients, appointments..." />
          </div>

          <div class="top-tools">
            <div class="dropdown" id="notifRoot" title="Notifications">
              <i class="ri-notification-3-line notif-icon" id="notifIcon"></i>
              <div class="dropdown-menu" id="notifMenu" aria-live="polite"><p class="muted">No new notifications</p></div>
            </div>

            <button id="btnScanQR" class="btn-gold" title="Scan QR">Scan QR</button>
            <button id="btnSettings" class="btn-outline-gold" title="Settings">Settings</button>

            <label class="theme-toggle" title="Toggle theme">
              <input type="checkbox" id="toggleDark" aria-label="Toggle dark mode" />
              <span class="toggle-label" role="switch" aria-checked="false">
                <span class="knob"></span>
              </span>
            </label>
            
            <div class="profile" title="Profile"><i class="ri-user-line"></i></div>
          </div>
        </div>
      </header>

      <section class="view-container">
        <section id="view-dashboard" class="view active-view" aria-live="polite">
          <div class="header-row">
            <div class="hero-card hover-tilt">
              <div class="hero-left">
                <h2 class="welcome-text">Good day, Dr. Johanna</h2>
                <p class="muted" id="welcomeSubtitle">Quick access to patient data, schedule, and performance reports.</p>
                <div class="hero-actions">
                  <button class="btn" id="openAppointments">View Appointments</button>
                  <button class="btn ghost" id="openPrescriptions">Prescriptions</button>
                </div>
              </div>
              <div class="hero-right">
                <video class="hero-vid" autoplay loop muted playsinline>
                  <source src="../../assets/animations/Medical Consultation.webm" type="video/webm" />
                </video>
              </div>
            </div>

            <div class="stats-col">
              <div class="stat card hover-tilt">
                <div class="stat-title">ğŸ“… Today's</div>
                <div class="stat-value" id="statToday">--</div>
              </div>
              <div class="stat card hover-tilt">
                <div class="stat-title">ğŸ’Š Prescriptions</div>
                <div class="stat-value" id="statPres">--</div>
              </div>
              <div class="stat card hover-tilt">
                <div class="stat-title">ğŸ‘¥ Active Patients</div>
                <div class="stat-value" id="statPatients">--</div>
              </div>
            </div>
          </div>
          
          <div class="reports-and-metrics">
            <div class="card metrics-widget">
                <h3 class="section-heading">Key Patient Status</h3>
                <div class="metric-grid" id="metricsGrid">
                    <div class="metric-item"><strong>Hypertension</strong><span id="metricHTN" class="stat-value small">45</span></div>
                    <div class="metric-item"><strong>Diabetes</strong><span id="metricDM" class="stat-value small">22</span></div>
                    <div class="metric-item"><strong>Migraine</strong><span id="metricMIG" class="stat-value small">15</span></div>
                </div>
            </div>
            
            <div class="card chart-widget">
                <h3 class="section-heading">Appointment Flow</h3>
                <canvas id="appointmentsChartDash"></canvas>
            </div>
          </div>


          <h2 class="section-heading">Upcoming Appointments</h2>
          <div class="card table-container" id="dashboardAppts">
            <table>
              <thead><tr><th>Patient</th><th>Date</th><th>Time</th><th>Status</th><th>Actions</th></tr></thead>
              <tbody id="dashboardApptsBody">
                </tbody>
            </table>
          </div>
        </section>

        <section id="view-appointments" class="view">
          <div class="page-header"><h2>Appointments</h2><p class="muted">Manage your schedule</p></div>
          <div class="card table-container">
            <div class="table-actions">
              <button class="btn" id="btnAddAppt">+ New Appointment</button>
              <input id="filterAppt" placeholder="Filter by patient" />
            </div>
            <table>
              <thead><tr><th>Patient</th><th>Date</th><th>Time</th><th>Status</th><th>Actions</th></tr></thead>
              <tbody id="apptBody"></tbody>
            </table>
          </div>
        </section>

        <section id="view-patients" class="view">
          <div class="page-header"><h2>Patients</h2><p class="muted">Patient records & quick actions</p></div>
          <div class="card table-container">
            <div class="table-actions">
              <button class="btn" id="btnAddPatient">+ Add Patient</button>
              <input id="filterPatient" placeholder="Search patient" />
            </div>
            <div id="patientsList" class="card-list"></div>
          </div>
        </section>

        <section id="view-prescriptions" class="view">
          <div class="page-header"><h2>Prescriptions</h2><p class="muted">Create and manage prescriptions. Scan QR or click 'Open' to view details.</p></div>
          <div class="card table-container">
            <div class="table-actions">
              <button class="btn" id="btnNewPrescription">+ New Prescription</button>
              <input id="filterPres" placeholder="Filter by patient or medicine" />
            </div>
            <div id="presList" class="card-list"></div>
          </div>
        </section>

        <section id="view-reports" class="view">
          <div class="page-header"><h2>Reports & Analytics</h2><p class="muted">Deep dive into clinical load and key patient demographics.</p></div>
          <div class="report-grid">
            <div class="report-card card"><h3>Patient Demographics</h3><canvas id="patientsChart"></canvas></div>
            <div class="report-card card"><h3>Appointment Status Breakdown</h3><canvas id="appointmentsChart"></canvas></div>
          </div>
        </section>

        <section id="view-chat" class="view">
          <div class="page-header"><h2>Chat (WhatsApp)</h2><p class="muted">Open patient chat via WhatsApp</p></div>
          <div class="card-list" id="chatList"></div>
        </section>

        <section id="view-documents" class="view">
          <div class="page-header"><h2>Documents</h2><p class="muted">Upload & manage patient files</p></div>
          <div class="card table-container" id="docsArea"></div>
        </section>

        <section id="view-settings" class="view">
          <div class="page-header"><h2>Settings</h2><p class="muted">App preferences and security</p></div>
          <div class="settings-grid">
            <div class="card">
              <h4>Theme & Display</h4>
              <p class="muted">Toggle app theme</p>
              <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px;">
                <label><input type="checkbox" id="settingDark"/> Enable Dark Mode</label>
                <hr style="opacity:0.2"/>
                <label>Default View:</label>
                <select style="padding:6px;border-radius:6px;">
                    <option>Dashboard</option>
                    <option>Appointments</option>
                </select>
              </div>
            </div>

            <div class="card">
              <h4>Notifications</h4>
              <p class="muted">Control alert preferences</p>
              <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
                <label><input type="checkbox" id="settingNotifApp" checked/> New Appointment alerts</label>
                <label><input type="checkbox" id="settingNotifPharm" checked/> Pharmacy substitution requests</label>
                <label><input type="checkbox" id="settingSound" checked/> Play sound for alarms</label>
              </div>
            </div>

            <div class="card">
              <h4>Account & Security</h4>
              <p class="muted">Authentication & account actions</p>
              <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
                <button id="btnSignOut" class="btn ghost">Sign out</button>
                <button id="btnResetPass" class="btn ghost">Reset password</button>
                <button id="btnExportData" class="btn ghost small">Export Data</button>
              </div>
            </div>

            <div class="card">
              <h4>API/Integrations</h4>
              <p class="muted">Manage external access keys</p>
              <div style="margin-top:10px;">
                <label>Pharmacy API Key:</label>
                <input type="text" placeholder="*************" style="width:100%;padding:6px;margin-top:4px;border-radius:6px;border:1px solid rgba(0,0,0,0.08)"/>
                <button class="btn small" style="margin-top:8px;">Generate New Key</button>
              </div>
            </div>
          </div>
        </section>

      </section>
    </main>
  </div>

  <div id="modalsRoot"></div>
  
  <div id="editApptModal" class="modal hidden">
    <div class="card" style="width:min(400px, 96%)">
        <h3>Edit Appointment</h3>
        <p class="muted" id="editApptPatientName">Patient: --</p>
        <div style="margin-top:12px;">
            <label class="muted">Date</label>
            <input type="date" id="editApptDate" style="width:100%;padding:10px;margin-top:4px;border-radius:8px;border:1px solid rgba(0,0,0,0.08)"/>
        </div>
        <div style="margin-top:12px;">
            <label class="muted">Time</label>
            <input type="time" id="editApptTime" style="width:100%;padding:10px;margin-top:4px;border-radius:8px;border:1px solid rgba(0,0,0,0.08)"/>
        </div>
        <div style="margin-top:12px;">
            <label class="muted">Status</label>
            <select id="editApptStatus" style="width:100%;padding:10px;margin-top:4px;border-radius:8px;border:1px solid rgba(0,0,0,0.08)">
                <option value="pending">Pending</option>
                <option value="confirmed">Confirmed</option>
                <option value="completed">Completed</option>
                <option value="cancelled">Cancelled</option>
            </select>
        </div>
        <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:20px">
            <button id="saveEditAppt" class="btn">Save Changes</button>
            <button id="cancelEditAppt" class="btn small ghost">Cancel</button>
        </div>
    </div>
  </div>

  <script src="doctor_dashboard.js" defer></script>
</body>
</html>